<div class="row">
  <div class="col-md-2">
    <app-sidebar-off></app-sidebar-off>
  </div>
  <div class="col-md-10">
    <div class="container-fluid">
      <div class="search-box">
        <div class="row">
          <div class="col-md-6">
            <div class="search-box__filter">
              <label for="service" class="required left">Select Service</label>
              <select name="service" id="service" class="form-control" [(ngModel)]="selectedService">
                <option>Single Window Colony Approval</option>
                <option>Any Other</option>
              </select>
            </div>
            <div class="search-box__filter">
              <label for="from-date">From Date:</label>
              <input type="date" id="from-date" name="from-date" class="form-control">
            </div>
          </div>
          <div class="col-md-6">
            <div class="search-box__filter">
              <label for="task" class="required left">Select Task</label>
              <select name="task" id="task" class="form-select" [(ngModel)]="selectedTask" (change)="onTaskChange($event)">
                <option>ADM Verification</option>
                <option>Final Colony Development Permission</option>
              </select>
            </div>
            <div class="search-box__filter">
              <label for="to-date">To Date:</label>
              <input type="date" id="to-date" name="to-date" class="form-control">
            </div>
          </div>
        </div>
        <hr>
        <div class="search-box__button">
          <button type="button" class="btn btn-primary" (click)="filterData()"><i class="bi bi-arrow-right-short"></i>Get Data</button>
        </div>
      </div>
      <div class="container">
        <table class="table table-striped table-bordered">
          <thead class="table-primary">
            <tr>
              <th scope="col">Sr. No.</th>
              <th scope="col">Application Number</th>
              <th scope="col">Date</th>
              <th scope="col">View</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody class="table-group-divider">
            <tr *ngFor="let item of filteredData; let i = index" (click)="setSelectedApp(item)">
              <th scope="row">{{ i + 1 }}</th>
              <td>{{ 'CGAWAAS/2024/0000' + item.appNo }}</td>
              <td>{{ item.date }}</td>
              <td>
                <a href="#" (click)="openPreviewModal(item)" class="text-primary" style="text-decoration: underline;">Preview</a></td>
              <td>
                <a [routerLink]="['/officer1/verification', selectedService, selectedTask, item.appNo, item.date]">
                  {{ item.action }}
                </a>
              </td>
            </tr>
          </tbody>
        </table>  
      </div>
    </div>
  </div>
</div>

<!-- Preview Modal -->
<div class="modal fade" id="previewModal" tabindex="-1" aria-labelledby="previewModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="previewModalLabel"><strong>Preview</strong></h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="text-danger container rounded"><p>The Application has not yet been Submitted.</p></div>
        <div *ngIf="formData?.formFieldsData">
          <!-- Box 1: Integrated Single Window System Approval -->
<div class="container p-3 rounded">
            <h4><strong>Integrated Single Window System Approval</strong></h4>
            <hr>
            <div class="row">
              <div class="col-7"><strong>In which district is colony development permission sought?</strong></div>
              <div class="col-5">{{ formData.formFieldsData.selectedDistrict }}</div>
            </div>
            <div class="row">
              <div class="col-7"><strong>For which area is permission sought?</strong></div>
              <div class="col-5">{{ formData.formFieldsData.area }}</div>
            </div>
            <div class="row">
              <div class="col-7"><strong>In an urban area, which body should be approached for colony
                development permission?</strong></div>
              <div class="col-5">{{ formData.formFieldsData.body }}</div>
            </div>
            <div class="row">
              <div class="col-7"><strong>Choose the Municipal Corporation</strong></div>
              <div class="col-5">{{ formData.formFieldsData.choosingCorporation }} </div>
            </div>
            <div class="row">
              <div class="col-7"><strong>Choose the Municipal Council</strong></div>
              <div class="col-5">{{ formData.formFieldsData.choosingCouncil }}</div>
            </div>
            <div class="row">
              <div class="col-7"><strong>Choose the Municipal Jury</strong></div>
              <div class="col-5">{{ formData.formFieldsData.choosingJury }}</div>
            </div>
            <div class="row">
              <div class="col-7"><strong>Has the khasra been integrated?</strong></div>
              <div class="col-5">{{ formData.formFieldsData.khasraIntegrated }}</div>
            </div>
            <div class="row">
              <div class="col-7"><strong>Enter the integrated khasra number received from the revenue department</strong></div>
              <div class="col-5">{{ formData.formFieldsData.integratedKhasraNumber }}</div>
            </div>
          </div>
          
          <!-- Box 2: Format for Application for Colony Approval -->
          <div class="container p-3 my-3 rounded">
            <h4><strong>Format for Application for Colony Approval</strong></h4>
            <hr>
            <div class="row">
              <div class="col-7"><strong>1. Applicant's full name</strong></div>
              <div class="col-5">{{ formData.applicantData.fullName }}</div>
            </div>
            <br>
            <div class="row">
              <div class="col-7"><strong>2. Colonizer Registration Certificate(Attach a copy in PDF format of the issuing local urban body’s name, serial number, and date as an annexure in the Annexure Section.)</strong></div>
              <!-- <div class="col-5">{{ formData.applicantData.email }}</div> -->
            </div>
            <div class="row">
              <div class="col-7">2.1 Name of the Issuing Local Urban Body</div>
              <div class="col-5">{{ formData.applicantData.LUB }}</div>
            </div>
            <div class="row">
              <div class="col-7">2.2 Serial Number</div>
              <div class="col-5">{{ formData.applicantData.Srno }}</div>
            </div>
            <div class="row">
              <div class="col-7">2.3 Date</div>
              <div class="col-5">{{ formData.applicantData.registrationDate }}</div>
            </div>
            <br>
            <div class="row">
              <div class="col-7"><strong>3. Current Address</strong></div>
              <!-- <div class="col-5">{{ formData.applicantData.email }}</div> -->
            </div>
            <div class="row">
              <div class="col-7">3.1 House Number</div>
              <div class="col-5">{{ formData.applicantData.Hno }}</div>
            </div>
            <div class="row">
              <div class="col-7">3.2 Neighbourhood / Colony</div>
              <div class="col-5">{{ formData.applicantData.neighbourhoodColony }}</div>
            </div>
            <div class="row">
              <div class="col-7">3.3 District</div>
              <div class="col-5">{{ formData.applicantData.district }}</div>
            </div>
            <br>
            <div class="row">
              <div class="col-7"><strong>4. Details of the land, including survey number, which is intended
                to be developed.</strong></div>
            </div>
            <div class="row">
              <div class="col-7">4.1 Survey Number</div>
              <div class="col-5">{{ formData.applicantData.surveyNumber }}</div>
            </div>
            <div class="row">
              <div class="col-7">4.2 Area of the land</div>
              <div class="col-5">{{ formData.applicantData.area }}</div>
            </div>
            <div class="row">
              <div class="col-7">4.3 Village</div>
              <div class="col-5">{{ formData.applicantData.village }}</div>
            </div>
            <div class="row">
              <div class="col-7">4.4 Neighbourhood / Colony</div>
              <div class="col-5">{{ formData.applicantData.neighbourhoodColony4 }}</div>
            </div>
            <div class="row">
              <div class="col-7">4.5 District</div>
              <div class="col-5">{{ formData.applicantData.district4 }}</div>
            </div>
            <br>
            <div class="row">
              <div class="col-7"><strong>5. Has the applicant developed any land before submitting this application form? If yes, please
                provide the details.</strong></div>
            </div>
            <div class="row">
              <div class="col-7">5.1 Name (Developed Land)</div>
              <div class="col-5">{{ formData.applicantData.developedLandName }}</div>
            </div>
            <div class="row">
              <div class="col-7">5.2 Village</div>
              <div class="col-5">{{ formData.applicantData.village5 }}</div>
            </div>
            <div class="row">
              <div class="col-7">5.3 Neighbourhood / Colony</div>
              <div class="col-5">{{ formData.applicantData.neighbourhoodColony5 }}</div>
            </div>
            <div class="row">
              <div class="col-7">5.4 District</div>
              <div class="col-5">{{ formData.applicantData.district5 }}</div>
            </div>
            <br>
            <div class="row">
              <div class="col-7"><strong>6. Details of financial resources for the establishment of the colony (mention net worth). Attach in
                PDF format as an annexure in the Annexure Section.</strong></div>
            </div>
            <br>
            <div class="row">
              <div class="col-7"><strong>7. Relinquishment of land rights (1. In the case of 'Yes', the land for roads and
                open areas will be relinquished and recorded in the revenue records. 2. In the case of 'No', the land
                diversion fee and premium amount will be payable on the entire ownership of the land.)</strong></div>
                <div class="col-5">{{ formData.applicantData.relinquishment }}</div>
            </div>
            <br>
            <div class="row">
              <div class="col-7"><strong>8. For what purpose is the permit being requested?</strong></div>
                <div class="col-5">{{ formData.applicantData.permitPurpose }}</div>
            </div>
            <br>
            <div class="row">
              <div class="col-7"><strong>9. Mobile Number</strong></div>
              <div class="col-5">{{ formData.applicantData.mobileNumber }}</div>
            </div>
            <br>
            <div class="row">
              <div class="col-7"><strong>10. Email</strong></div>
              <div class="col-5">{{ formData.applicantData.email }}</div>
            </div>
            <br>
            <div class="row">
              <div class="col-7"><strong>11. If the applicant is a firm, provide the TIN/GSTN number.</strong></div>
              <div class="col-5">{{ formData.applicantData.tinGstnNumber }}</div>
            </div>
            <br>
            <div class="row">
              <div class="col-7"><strong>12. Proof of Applicant's Rights, Land or Plot Ownership, including Evidence of Rights: The following
                proofs will be attached:</strong></div>
                <div>
                  <div class="col-7"><label>(a) An attested copy of the original sale deed, lease deed, or any other document under which the
                    rights, claims, and interests in the land or plot are claimed. (Attach as Annexure in PDF format in the
                    Annexure Section)
                  </label></div>
                  <div class="col-7"><label>(b) If there is a will, an attested copy of the mutation and Khasra amalgamation (Attach as Annexure
                    in PDF format in the Annexure Section)
                  </label></div>
                  <div class="col-7"><label>(c) An attested copy of the Khasra map and Khatoni records (Khasra map B-1, P-II) (Attach as Annexure
                    in PDF format in the Annexure Section)
                  </label></div>
                  <div class="col-7">(d) Other documents acceptable to the authority (Attach as Annexure in PDF format in the Annexure
                    Section)</div>
                </div>
            </div>
            <br>
         
              <div><strong>13. The following information will be submitted by me/us...</strong>
                <div class="col-7"><label>(a) Proposed development map (including Khasra superimpose) (Attach as Annexure in the prescribed format in the Annexure Section)</label></div>
                <div class="row">
                <div class="col-7">
                <label class="required">(b) Details of 9% of the land earmarked for transfer to the Economically Weaker Section (EWS):</label>
              </div>
              <div class="col-5">{{ formData.applicantData.EWS }}</div>
              </div>    
          </div>
        
            
            <div class="row">
              <div class="col-7"><strong>If the proposed layout is less than one acre</strong></div>
              <div class="col-5">{{ formData.applicantData.EWS_Less }}</div>
            </div>
            <div class="row">
              <div class="col-7"><strong>If the proposed layout is one acre or more</strong></div>
            </div>
            <div class="row">
              <div class="col-7">Outside of Proposed non-residential area</div>
              <div class="col-5">{{ formData.applicantData.outside_res_area }}</div>
            </div>
            <div class="row">
              <div class="col-7">Within a radius of 01 kilometer (in the Gram Panchayat area) or within a radius of 03 kilometers (in the urban local body area) from the proposed non-residential area</div>
              <div class="col-5">{{ formData.applicantData.inside_res_area }}</div>
            </div>
            <br>
            <div class="row">
              <div class="col-7">Collector guideline rate in the proposed residential area</div>
              <div class="col-5">{{ formData.applicantData.CGR_Residential_Area }}</div>
            </div>
            <div class="row">
              <div class="col-7">Collector guideline rate in the proposed land area</div>
              <div class="col-5">{{ formData.applicantData.CGR_Land_Area }}</div>
            </div>
            <div class="row">
              <div class="col-7">Area of EWS land in the proposed residential area</div>
              <div class="col-5">{{ formData.applicantData.EWS_Residential_Area }}</div>
            </div>
            <div class="row">
              <div class="col-7">Area of the proposed EWS land</div>
              <div class="col-5">{{ formData.applicantData.EWS_Land_Area }}</div>
            </div>
            <div class="row">
              <div class="col-7">Total amount as per collector guideline rate in lieu of 9 percent EWS land</div>
              <div class="col-5">{{ formData.applicantData.CGRAmount }}</div>
            </div>
            <br>

            <div class="row">
              <div class="col-7"><strong>14. Clearance from various departments</strong></div>
              <div class="col-5">
                <div *ngIf="formData && formData.filteredClearances">
                  <div *ngFor="let clearanceKey of formData.filteredClearances">
                    {{ clearanceLabels[clearanceKey] }}
                  </div>
                </div>
              </div>
            </div>            
          </div>
        </div>
        <!-- </div> -->
        
        <div class="container p-3 rounded">
            <h4><strong>Additional Details</strong></h4>
            <hr>
            <div class="row" *ngIf="formData && formData.formFieldsData">
              <div class="col-2"><b>Apply to the Office</b></div>
              <div class="col-9">{{ formData.formFieldsData.office }}</div>
            </div>
        </div>
      </div>
      </div>
    </div>
  </div>